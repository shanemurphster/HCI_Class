<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Locker • Homerun</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="inner">
        <div class="brand" onclick="location.href='index.html'" style="cursor:pointer">
          <div class="logo" aria-hidden="true"></div>
          <div class="brand-name">Homerun</div>
        </div>
        <nav class="primary-nav" aria-label="Primary">
          <a href="messages.html">Messages</a>
          <a href="cupid.html">Cupid</a>
          <a href="events.html">Events</a>
          <a href="locker.html">Locker</a>
          <a href="reels.html">Reels</a>
        </nav>
        <div class="header-actions"></div>
      </div>
    </header>

    <main class="container">
      <div class="section-header">
        <h1>Locker Room</h1>
        <button id="edit-theme" class="btn btn-secondary">Edit Theme</button>
      </div>

      <section class="card" id="locker-canvas" style="min-height:220px; padding:20px">
        <div class="col" style="gap:12px">
          <div class="row" style="justify-content:space-between; align-items:center">
            <div class="col" style="gap:6px">
              <h2 id="profile-name">Ava Chen</h2>
              <div class="row"><span class="chip role">Captain</span><span class="chip">W Track</span><span class="chip">SEAS '27</span></div>
            </div>
            <button id="toggle-locker" class="btn btn-primary">Open Locker</button>
          </div>
          <div class="locker" id="locker">
            <div class="inside">
              <div class="cat-rail">
                <div class="tab active" data-cat="tops">Tops</div>
                <div class="tab" data-cat="bottoms">Bottoms</div>
                <div class="tab" data-cat="shoes">Shoes</div>
                <div class="tab" data-cat="accessories">Accessories</div>
              </div>
              <div class="center-well">
                <div class="bitmoji" id="bitmoji">
                  <svg viewBox="0 0 120 180" aria-label="Avatar">
                    <defs>
                      <clipPath id="bodyClip"><rect x="20" y="40" width="80" height="120" rx="10"/></clipPath>
                    </defs>
                    <circle cx="60" cy="26" r="14" fill="#F0D0B0"/>
                    <rect x="20" y="40" width="80" height="120" rx="10" fill="#1f2937"/>
                    <g id="svg-top" clip-path="url(#bodyClip)">
                      <rect x="20" y="40" width="80" height="60" fill="#011F5B"/>
                    </g>
                    <g id="svg-bottom" clip-path="url(#bodyClip)">
                      <rect x="20" y="100" width="80" height="60" fill="#6B7280"/>
                    </g>
                    <g id="svg-shoes">
                      <rect x="28" y="156" width="20" height="8" rx="3" fill="#2AD3B3"/>
                      <rect x="72" y="156" width="20" height="8" rx="3" fill="#2AD3B3"/>
                    </g>
                    <g id="svg-acc"></g>
                  </svg>
                </div>
                <div class="actions">
                  <button id="equip-none" class="btn btn-ghost">Unequip</button>
                  <button id="reset-outfit" class="btn btn-secondary">Reset</button>
                  <button id="save-outfit" class="btn btn-accent">Save Outfit</button>
                </div>
              </div>
              <div>
                <div class="category-tabs" style="display:none"></div>
                <div id="wardrobe" class="wardrobe-grid"></div>
              </div>
            </div>
            <div class="door left" id="door-left" title="Open/Close">
              <div class="panel">
                <div class="shelf" id="shelf-left-top"><div class="title">Tops</div></div>
                <div class="shelf" id="shelf-left-bottom"><div class="title">Bottoms</div></div>
              </div>
              <div class="handle"></div>
            </div>
            <div class="door right" id="door-right" title="Open/Close">
              <div class="panel">
                <div class="shelf" id="shelf-right-shoes"><div class="title">Shoes</div></div>
                <div class="shelf" id="shelf-right-acc"><div class="title">Accessories</div></div>
              </div>
              <div class="handle"></div>
            </div>
          </div>
          <div class="row" id="stickers"></div>
        </div>
      </section>

      <div class="grid cols-2" style="margin-top:12px">
        <section class="card">
          <h3>Photos</h3>
          <div id="photos" class="grid" style="grid-template-columns:1fr 1fr 1fr"></div>
          <div class="row" style="margin-top:8px">
            <button id="add-photo" class="btn btn-primary">Add photos</button>
          </div>
        </section>
        <section class="card">
          <h3>Fun Facts</h3>
          <ul id="facts" style="margin:0; padding-left:16px"></ul>
          <div class="row" style="margin-top:8px">
            <input id="new-fact" class="input" placeholder="Add a fun fact" />
            <button id="add-fact" class="btn btn-accent">Add</button>
          </div>
        </section>
      </div>

      <section class="card" style="margin-top:12px">
        <div class="section-header"><h3>Schedule</h3><label class="chip">Public <input type="checkbox" id="schedule-privacy" checked/></label></div>
        <div id="schedule" class="list"></div>
      </section>
    </main>

    <div id="theme-modal" class="modal-backdrop">
      <div class="modal">
        <div class="modal-header">
          <h3>Theme Editor</h3>
          <button class="btn btn-ghost" id="close-theme">✕</button>
        </div>
        <div class="modal-body">
          <div class="row" style="gap:16px; flex-wrap:wrap">
            <label class="col">Primary <input type="color" id="color-primary" class="input" /></label>
            <label class="col">Secondary <input type="color" id="color-secondary" class="input" /></label>
            <label class="col">Accent <input type="color" id="color-accent" class="input" /></label>
          </div>
          <div class="row" style="justify-content:flex-end; margin-top:12px">
            <button id="preset-penn" class="btn btn-secondary">Penn Preset</button>
            <button id="save-theme" class="btn btn-accent">Save</button>
          </div>
        </div>
      </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/mock-data.js"></script>
    <script>
      const { $, $$, showToast, storage } = window.Homerun;
      function render(){
        const p = MockData.lockerProfile;
        const canvas = $('#locker-canvas');
        canvas.style.border = `6px solid ${p.theme.primary}`;
        canvas.style.boxShadow = `inset 0 0 0 6px ${p.theme.secondary}`;
        $('#stickers').innerHTML = (p.stickers||[]).map(s=>`<span class='chip'>${s}</span>`).join(' ');
        const photos = $('#photos');
        photos.innerHTML = '';
        if (!(p.photos||[]).length) photos.innerHTML = `<div class='empty'>No photos yet</div>`;
        p.photos.forEach((src, i)=>{
          const ph = document.createElement('div'); ph.style.background='#E2E8F0'; ph.style.borderRadius='12px'; ph.style.height='100px'; ph.style.display='grid'; ph.style.placeItems='center'; ph.textContent = src.split('/').pop(); photos.appendChild(ph);
        });
        const facts = $('#facts'); facts.innerHTML = (p.funFacts||[]).map(f=>`<li>${f}</li>`).join('');
        const schedule = $('#schedule'); schedule.innerHTML = (p.schedule||[]).map(r=>`<div class='row'><span class='chip'>${r.day}</span><span>${r.what}</span><span class='muted'>${r.when}</span></div>`).join('');
        $('#schedule-privacy').checked = (p.privacy?.schedule||'teammates')==='public';
        renderAvatar();
      }
      function renderAvatar(){
        const o = MockData.lockerProfile.avatar?.outfit || {};
        const top = o.top ? MockData.clothingCatalog.tops.find(x=>x.id===o.top) : null;
        const bot = o.bottom ? MockData.clothingCatalog.bottoms.find(x=>x.id===o.bottom) : null;
        const sh = o.shoes ? MockData.clothingCatalog.shoes.find(x=>x.id===o.shoes) : null;
        const acc = o.accessory ? MockData.clothingCatalog.accessories.find(x=>x.id===o.accessory) : null;
        const svgTop = document.getElementById('svg-top').firstElementChild; if (svgTop && top) svgTop.setAttribute('fill', top.color || '#011F5B'); else if (svgTop) svgTop.setAttribute('fill', '#011F5B');
        const svgBot = document.getElementById('svg-bottom').firstElementChild; if (svgBot && bot) svgBot.setAttribute('fill', bot.color || '#6B7280'); else if (svgBot) svgBot.setAttribute('fill', '#6B7280');
        const shoes = document.getElementById('svg-shoes').querySelectorAll('rect'); shoes.forEach(r=> r.setAttribute('fill', sh?.color || '#2AD3B3'));
        const svgAcc = document.getElementById('svg-acc'); svgAcc.innerHTML = acc ? `<circle cx='96' cy='54' r='4' fill='${acc.color||'#FBBF24'}' />` : '';
      }
      function addPhoto(){ const p = MockData.lockerProfile; if ((p.photos||[]).length>=3){ showToast('Max 3 photos'); return; } p.photos.push('assets/img/track_0'+(p.photos.length+1)+'.jpg'); storage.set('lockerProfile', MockData.lockerProfile); render(); showToast('Photo added'); }
      function addFact(){ const val = ($('#new-fact').value||'').trim(); if(!val) return; MockData.lockerProfile.funFacts.push(val); storage.set('lockerProfile', MockData.lockerProfile); $('#new-fact').value=''; render(); }
      function toggleSchedulePrivacy(){ MockData.lockerProfile.privacy.schedule = $('#schedule-privacy').checked ? 'public':'teammates'; storage.set('lockerProfile', MockData.lockerProfile); showToast('Privacy updated'); }
      function openTheme(){ $('#theme-modal').classList.add('show'); $('.modal-backdrop').classList.add('show'); const t=MockData.lockerProfile.theme; $('#color-primary').value=t.primary; $('#color-secondary').value=t.secondary; $('#color-accent').value=t.accent; }
      function closeTheme(){ $('#theme-modal').classList.remove('show'); $('.modal-backdrop').classList.remove('show'); }
      function saveTheme(){ const t=MockData.lockerProfile.theme; t.primary=$('#color-primary').value; t.secondary=$('#color-secondary').value; t.accent=$('#color-accent').value; storage.set('lockerProfile', MockData.lockerProfile); closeTheme(); render(); showToast('Theme saved'); }
      function preset(){ $('#color-primary').value='#011F5B'; $('#color-secondary').value='#990000'; $('#color-accent').value='#2AD3B3'; }
      function toggleLocker(){ const l=$('#locker'); const open=l.classList.toggle('open'); $('#toggle-locker').textContent = open? 'Close Locker':'Open Locker'; }
      function renderWardrobe(cat='tops'){
        $$('.cat-rail .tab').forEach(t=> t.classList.toggle('active', t.dataset.cat===cat));
        const catalog = MockData.clothingCatalog;
        const inject = (el, arr, category) => {
          el.innerHTML = '';
          if (!arr || !arr.length){ el.innerHTML = `<div class='muted'>None</div>`; return; }
          arr.forEach(it=>{
            const chip = document.createElement('div'); chip.className='item'; chip.innerHTML = `<span>${it.emoji}</span><span>${it.name}</span>`;
            chip.addEventListener('click', ()=> equip(category, it.id));
            el.appendChild(chip);
          });
        };
        inject($('#shelf-left-top'), catalog.tops, 'tops');
        inject($('#shelf-left-bottom'), catalog.bottoms, 'bottoms');
        inject($('#shelf-right-shoes'), catalog.shoes, 'shoes');
        inject($('#shelf-right-acc'), catalog.accessories, 'accessories');
      }
      function equip(cat, id){ const o = MockData.lockerProfile.avatar.outfit; if (cat==='tops') o.top=id; if (cat==='bottoms') o.bottom=id; if (cat==='shoes') o.shoes=id; if (cat==='accessories') o.accessory=id; renderAvatar(); }
      function unequipAll(){ MockData.lockerProfile.avatar.outfit = { top:null, bottom:null, shoes:null, accessory:null }; renderAvatar(); }
      function saveOutfit(){ storage.set('lockerProfile', MockData.lockerProfile); showToast('Outfit saved'); }
      function resetOutfit(){ MockData.lockerProfile.avatar.outfit = { top:'top1', bottom:'bot1', shoes:'sh1', accessory:null }; saveOutfit(); renderAvatar(); }
      document.addEventListener('DOMContentLoaded', ()=>{ render(); $('#add-photo').addEventListener('click', addPhoto); $('#add-fact').addEventListener('click', addFact); $('#schedule-privacy').addEventListener('change', toggleSchedulePrivacy); $('#edit-theme').addEventListener('click', openTheme); $('#close-theme').addEventListener('click', closeTheme); $('#save-theme').addEventListener('click', saveTheme); $('#preset-penn').addEventListener('click', preset); });
      document.addEventListener('DOMContentLoaded', ()=>{ $('#toggle-locker').addEventListener('click', toggleLocker); $$('.cat-rail .tab').forEach(t=> t.addEventListener('click', ()=> renderWardrobe(t.dataset.cat))); renderWardrobe('tops'); $('#equip-none').addEventListener('click', unequipAll); $('#save-outfit').addEventListener('click', saveOutfit); $('#reset-outfit').addEventListener('click', resetOutfit); $('#door-left').addEventListener('click', toggleLocker); $('#door-right').addEventListener('click', toggleLocker); });
    </script>
  </body>
  </html>


